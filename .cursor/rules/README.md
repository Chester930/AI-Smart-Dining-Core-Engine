# Cursor規則文件使用指南

## 什麼是Cursor規則文件？

Cursor規則文件是JSON格式的配置文件，用於自定義AI助手在特定項目中的行為、編碼風格和最佳實踐。這些規則會影響AI助手在代碼生成、建議和回答問題時的行為。

## 文件結構

```
.cursor/
└── rules/
    ├── README.md                    # 本說明文件
    ├── ai-smart-dining-rules.json   # 項目特定規則
    └── general-rules.json           # 通用規則模板
```

## 規則文件格式

每個規則文件包含以下主要部分：

### 1. 基本信息
```json
{
  "name": "規則名稱",
  "description": "規則描述",
  "version": "版本號"
}
```

### 2. 規則定義
```json
{
  "rules": [
    {
      "name": "規則名稱",
      "description": "規則描述",
      "content": [
        "具體規則1",
        "具體規則2",
        "具體規則3"
      ]
    }
  ]
}
```

### 3. 文件模式匹配
```json
{
  "filePatterns": {
    "*.ts": ["編碼規範", "API設計規則"],
    "*.js": ["編碼規範", "API設計規則"],
    "*.sql": ["數據庫設計規則"]
  }
}
```

### 4. AI行為配置
```json
{
  "aiBehavior": {
    "context": "AI助手的上下文設定",
    "preferences": [
      "偏好設定1",
      "偏好設定2"
    ]
  }
}
```

## 如何使用

### 1. 創建規則文件
- 在項目根目錄創建 `.cursor/rules/` 目錄
- 添加JSON格式的規則文件
- 文件名建議使用描述性名稱，如 `project-rules.json`

### 2. 規則文件命名建議
- `general-rules.json` - 通用開發規則
- `[project-name]-rules.json` - 項目特定規則
- `[language]-rules.json` - 特定語言規則
- `[framework]-rules.json` - 特定框架規則

### 3. 規則內容建議
根據項目類型包含以下規則：

#### 編碼規範
- 命名約定
- 代碼格式
- 註釋要求
- 文件組織

#### 架構規則
- 設計模式
- 模組化原則
- API設計
- 數據庫設計

#### 安全規範
- 輸入驗證
- 身份驗證
- 數據保護
- 錯誤處理

#### 性能規範
- 優化策略
- 緩存使用
- 資源管理
- 監控要求

#### 測試規範
- 測試覆蓋率
- 測試類型
- 測試工具
- 測試命名

## 最佳實踐

### 1. 規則組織
- 將相關規則分組
- 使用清晰的命名
- 保持規則簡潔明確
- 定期更新規則

### 2. 文件模式匹配
- 根據文件類型應用不同規則
- 避免過度複雜的匹配模式
- 確保規則覆蓋所有相關文件

### 3. AI行為配置
- 提供清晰的上下文
- 設定明確的偏好
- 考慮項目特定需求
- 平衡自動化和控制

### 4. 版本管理
- 使用語義化版本號
- 記錄規則變更
- 與團隊協調規則更新
- 測試規則效果

## 示例用法

### 在對話中使用規則
當您與AI助手對話時，規則會自動生效：

1. **代碼生成** - AI會根據規則生成符合規範的代碼
2. **代碼審查** - AI會根據規則檢查代碼問題
3. **建議提供** - AI會根據規則提供相關建議
4. **問題回答** - AI會根據規則上下文回答問題

### 規則優先級
- 項目特定規則 > 通用規則
- 更具體的文件模式 > 更通用的文件模式
- 後加載的規則 > 先加載的規則

## 故障排除

### 常見問題

1. **規則不生效**
   - 檢查JSON格式是否正確
   - 確認文件路徑是否正確
   - 重啟Cursor編輯器

2. **規則衝突**
   - 檢查規則優先級
   - 合併衝突的規則
   - 使用更具體的文件模式

3. **性能問題**
   - 減少規則數量
   - 簡化文件模式匹配
   - 優化規則內容

### 調試技巧

1. **測試規則**
   - 創建簡單的測試規則
   - 逐步添加複雜規則
   - 觀察AI行為變化

2. **日誌檢查**
   - 查看Cursor日誌
   - 檢查規則加載狀態
   - 確認錯誤信息

## 進階功能

### 1. 動態規則
可以根據項目狀態動態調整規則：

```json
{
  "dynamicRules": {
    "condition": "project.hasTests",
    "rules": ["測試規範"]
  }
}
```

### 2. 環境特定規則
為不同環境設置不同規則：

```json
{
  "environments": {
    "development": ["開發規範"],
    "production": ["生產規範"]
  }
}
```

### 3. 團隊協作
- 將規則文件加入版本控制
- 建立規則審查流程
- 定期團隊規則討論
- 收集使用反饋

## 總結

Cursor規則文件是一個強大的工具，可以幫助您：
- 保持代碼一致性
- 提高開發效率
- 減少錯誤
- 改善代碼質量
- 標準化開發流程

通過合理配置和使用規則文件，您可以讓AI助手更好地理解您的項目需求，提供更準確和有用的幫助。 